# iOS 18 快捷指令正确操作名称指南

## 🔧 正确的iOS 18操作名称

根据[Apple官方文档](https://support.apple.com/zh-cn/guide/shortcuts/apdd02c2780c/ios)，iOS 18中的正确操作名称是：

### 🏠 数据存储相关操作（正确名称）

#### 1. 保存数据
```
操作名称: "设定变量"
- 变量名称: "user_settings"
- 值: 用户输入的设置词典
```

#### 2. 读取数据
```
操作名称: "获取变量"
- 变量: "user_settings"
- 如果没有变量: 继续运行
```

#### 3. 检查数据是否存在
```
操作名称: "如果"
- 条件: "获取变量" 有任何值
- 如果为真: 使用已保存设置
- 如果为假: 首次设置
```

## 📱 完整的iOS 18快捷指令设计

### 第一步：检查保存的设置
```
操作1: 获取变量
- 变量名: user_settings
- 允许空值: 开启
```

### 第二步：智能菜单判断
```
操作2: 如果
- 输入: 获取变量的结果
- 条件: 有任何值
- 如果为真: 显示"直接使用"和"重新设置"菜单
- 如果为假: 进入首次设置
```

### 第三步：菜单选择（有设置时）
```
操作3: 从菜单中选取
- 提示: "选择操作"
- 菜单项:
  - "直接使用"
  - "重新设置"
  - "取消"
```

### 第四步：处理首次设置
```
操作4: 请求输入
- 提示: "请输入密钥"
- 输入类型: 文本
- 变量名: input_key
```

```
操作5: 请求输入
- 提示: "输入显示姓名"
- 默认答案: "ZH** ****AN (만 20세)"
- 输入类型: 文本
- 变量名: input_name
```

```
操作6: 请求输入
- 提示: "输入日期 (YYYY.MM.DD)"
- 默认答案: "2025.01.28"
- 输入类型: 文本
- 变量名: input_date
```

### 第五步：验证API请求
```
操作7: 获取URL内容
- URL: http://47.116.165.228:3008/api/patch
- 方法: POST
- 标头: Content-Type: application/json
- 请求体: JSON
```

**JSON请求体：**
```json
{
  "key": "input_key变量",
  "name": "input_name变量",
  "date": "input_date变量"
}
```

### 第六步：处理验证结果
```
操作8: 获取词典值
- 获取: 值
- 词典: 获取URL内容的结果
- 键: success
```

```
操作9: 如果
- 条件: 获取词典值的结果 等于 true
- 如果为真: 保存设置并继续
- 如果为假: 显示错误信息
```

### 第七步：保存设置（验证成功后）
```
操作10: 设定词典
- 词典:
  - key: input_key
  - name: input_name
  - date: input_date
  - created: 当前日期时间
```

```
操作11: 设定变量
- 变量名: user_settings
- 值: 设定词典的结果
```

### 第八步：使用已保存设置
```
操作12: 获取词典值
- 获取: 值
- 词典: user_settings变量
- 键: key
- 变量名: saved_key
```

```
操作13: 获取词典值
- 获取: 值
- 词典: user_settings变量
- 键: name
- 变量名: saved_name
```

```
操作14: 获取词典值
- 获取: 值
- 词典: user_settings变量
- 键: date
- 变量名: saved_date
```

### 第九步：最终API执行
```
操作15: 获取URL内容
- URL: http://47.116.165.228:3008/api/patch
- 方法: POST
- 标头: Content-Type: application/json
- 请求体: JSON
```

**最终执行JSON：**
```json
{
  "key": "saved_key或input_key变量",
  "name": "saved_name或input_name变量",
  "date": "saved_date或input_date变量"
}
```

### 第十步：执行JavaScript
```
操作16: 获取词典值
- 获取: 值
- 词典: 获取URL内容的结果
- 键: simpleCode
```

```
操作17: 在网页上运行JavaScript
- 网页: 目标网页URL
- JavaScript: patch-client-ios-simple.js的代码
```

## 🎯 重置功能集成

### 重置分支操作：
```
操作: 显示提醒
- 标题: "确认重置"
- 消息: "将清除所有保存的设置，确定吗？"
- 操作: "确定" 和 "取消"
```

```
操作: 如果
- 条件: 所选项目 等于 "确定"
- 如果为真: 清除变量
```

```
操作: 设定变量
- 变量名: user_settings
- 值: [删除，留空]
```

## 💡 iOS 18关键要点

### ✅ 正确的操作名称：
- ❌ 错误：从"文件"中获取值
- ✅ 正确：获取变量

### ✅ 变量管理：
- ❌ 错误：在"文件"中设置值
- ✅ 正确：设定变量

### ✅ 词典操作：
- ✅ 设定词典：创建键值对
- ✅ 获取词典值：从词典中提取值

### ✅ 条件判断：
- ✅ 如果：基本条件判断
- ✅ 从菜单中选取：用户选择菜单

## 🔧 变量使用技巧

### 魔法变量使用：
1. 点击文本框
2. 选择"选择变量"
3. 从蓝色药丸中选择需要的变量
4. 变量会自动插入到正确位置

### 手动变量命名：
- 使用有意义的名称
- 如：user_settings、input_key、saved_name

这样设计的快捷指令完全符合iOS 18的操作规范！ 